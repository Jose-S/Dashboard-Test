"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./config"),t=require("./transport"),a={"Content-Type":"application/json"};exports.getPackageUrls=(async({names:t,version:a,activationKey:r})=>{const o=await exports.checkActivation({activationKey:r});return"error"in o?o:{packageUrls:t.reduce((t,r)=>(t[r]=`${e.inkstoneConfig.baseUrl}v0/diez/package/:DIEZ_ORG_KEY/:PACKAGE_ID/:VERSION`.replace(":DIEZ_ORG_KEY",JSON.parse(o.organizationKey)).replace(":PACKAGE_ID",(e=>e.replace("/","+"))(r)).replace(":VERSION",a),t),{})}}),exports.performActivation=(async({activationKey:r})=>{const o={SeatId:r},i={url:e.inkstoneConfig.baseUrl+"v0/diez/activation",json:o,headers:a},{httpResponse:n}=await t.post(i);return 200===n.statusCode?{}:409===n.statusCode?{error:new Error("This device has already been activated â€” multiple activations are not supported at this time. If you have any questions, please reach out to contact@haikuforteams.com.")}:{error:new Error("Error activating the license, please contact Haiku at contact@haikuforteams.com")}}),exports.checkActivation=(async({activationKey:r})=>{if(!r)return{error:new Error("You must provide an activation key.")};const o={url:`${e.inkstoneConfig.baseUrl}v0/diez/activation/:ACTIVATION_ID`.replace(":ACTIVATION_ID",r),headers:a},{body:i,httpResponse:n}=await t.get(o);return n&&200===n.statusCode?{organizationKey:i}:{error:new Error("Error validating your license, if you think this is an error please reach out to contact@haikuforteams.com.")}});
//# sourceMappingURL=/@diez/sdk-inkstone/lib/index.js.map