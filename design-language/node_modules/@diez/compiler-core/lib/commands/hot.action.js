"use strict";const e=require("enquirer"),r=require("fs-extra"),t=require("../api"),o=require("../parser"),n=require("../utils"),a=async(s,i)=>new Promise(async(c,u)=>{const p=new o.ProjectParser(await n.getProjectRoot(),s,!0);p.on(t.CompilerEvent.Compiled,()=>n.printWarnings(p.components)),p.once(t.CompilerEvent.Compiled,()=>{i.handler(p).catch(async t=>{if(!(t instanceof n.ExistingHotUrlMutexError))return u(t);const{removeMutex:o}=await(async()=>{const r=[];return r.push({type:"confirm",name:"removeMutex",required:!0,message:"We found another hot process running, do you want to take over?."}),await e.prompt(r)})();o||process.exit(0),r.removeSync(t.mutexPath),p.close(),n.projectCache.clear(),a(s,i)}).then(c)}),p.watch()});module.exports=(async e=>{e.target=e.target.toLowerCase();const r=(await n.getTargets()).get(e.target);if(!r)throw new Error(`Invalid target: ${e.target}. See --help for options.`);await a(e,r)});
//# sourceMappingURL=/@diez/compiler-core/lib/commands/hot.action.js.map